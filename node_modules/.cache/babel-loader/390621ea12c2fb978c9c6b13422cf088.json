{"ast":null,"code":"const url = require(\"url\");\n\nconst template = require(\"nba-client-template\");\n\nconst fetch = require(\"node-fetch\");\n\nconst HEADERS = {\n  \"Accept-Encoding\": \"gzip, deflate\",\n  \"Accept-Language\": \"en-US\",\n  Accept: \"*/*\",\n  \"User-Agent\": template.user_agent,\n  Referer: template.referrer,\n  Connection: \"keep-alive\",\n  \"Cache-Control\": \"no-cache\",\n  Origin: \"http://stats.nba.com\"\n};\n\nfunction createUrlString(_url, query) {\n  const urlObj = url.parse(_url);\n  urlObj.query = query;\n  return urlObj.format();\n}\n\nmodule.exports = function getJson(_url, query, _options = {}) {\n  const urlStr = createUrlString(_url, query);\n  const options = { ..._options,\n    headers: { ..._options.headers,\n      ...HEADERS\n    }\n  };\n  return fetch(urlStr, options).then(resp => {\n    if (resp.ok) return resp.json();\n    return resp.text().then(function (text) {\n      throw new Error(`${resp.status} ${resp.statusText} – ${text}`);\n    });\n  });\n};","map":{"version":3,"sources":["/Users/mango/Documents/Personal/Web/NBA/node_modules/nba/src/get-json.js"],"names":["url","require","template","fetch","HEADERS","Accept","user_agent","Referer","referrer","Connection","Origin","createUrlString","_url","query","urlObj","parse","format","module","exports","getJson","_options","urlStr","options","headers","then","resp","ok","json","text","Error","status","statusText"],"mappings":"AAAA,MAAMA,GAAG,GAAGC,OAAO,CAAC,KAAD,CAAnB;;AACA,MAAMC,QAAQ,GAAGD,OAAO,CAAC,qBAAD,CAAxB;;AACA,MAAME,KAAK,GAAGF,OAAO,CAAC,YAAD,CAArB;;AAEA,MAAMG,OAAO,GAAG;AACd,qBAAmB,eADL;AAEd,qBAAmB,OAFL;AAGdC,EAAAA,MAAM,EAAE,KAHM;AAId,gBAAcH,QAAQ,CAACI,UAJT;AAKdC,EAAAA,OAAO,EAAEL,QAAQ,CAACM,QALJ;AAMdC,EAAAA,UAAU,EAAE,YANE;AAOd,mBAAiB,UAPH;AAQdC,EAAAA,MAAM,EAAE;AARM,CAAhB;;AAWA,SAASC,eAAT,CAA0BC,IAA1B,EAAgCC,KAAhC,EAAuC;AACrC,QAAMC,MAAM,GAAGd,GAAG,CAACe,KAAJ,CAAUH,IAAV,CAAf;AACAE,EAAAA,MAAM,CAACD,KAAP,GAAeA,KAAf;AACA,SAAOC,MAAM,CAACE,MAAP,EAAP;AACD;;AAEDC,MAAM,CAACC,OAAP,GAAiB,SAASC,OAAT,CAAkBP,IAAlB,EAAwBC,KAAxB,EAA+BO,QAAQ,GAAG,EAA1C,EAA8C;AAC7D,QAAMC,MAAM,GAAGV,eAAe,CAACC,IAAD,EAAOC,KAAP,CAA9B;AAEA,QAAMS,OAAO,GAAG,EACd,GAAGF,QADW;AAEdG,IAAAA,OAAO,EAAE,EAAE,GAAGH,QAAQ,CAACG,OAAd;AAAuB,SAAInB;AAA3B;AAFK,GAAhB;AAKA,SAAOD,KAAK,CAACkB,MAAD,EAASC,OAAT,CAAL,CACJE,IADI,CACCC,IAAI,IAAI;AACZ,QAAIA,IAAI,CAACC,EAAT,EAAa,OAAOD,IAAI,CAACE,IAAL,EAAP;AAEb,WAAOF,IAAI,CAACG,IAAL,GAAYJ,IAAZ,CAAiB,UAAUI,IAAV,EAAgB;AACtC,YAAM,IAAIC,KAAJ,CAAW,GAAEJ,IAAI,CAACK,MAAO,IAAGL,IAAI,CAACM,UAAW,MAAKH,IAAK,EAAtD,CAAN;AACD,KAFM,CAAP;AAGD,GAPI,CAAP;AAQD,CAhBD","sourcesContent":["const url = require(\"url\");\nconst template = require(\"nba-client-template\");\nconst fetch = require(\"node-fetch\");\n\nconst HEADERS = {\n  \"Accept-Encoding\": \"gzip, deflate\",\n  \"Accept-Language\": \"en-US\",\n  Accept: \"*/*\",\n  \"User-Agent\": template.user_agent,\n  Referer: template.referrer,\n  Connection: \"keep-alive\",\n  \"Cache-Control\": \"no-cache\",\n  Origin: \"http://stats.nba.com\",\n};\n\nfunction createUrlString (_url, query) {\n  const urlObj = url.parse(_url);\n  urlObj.query = query;\n  return urlObj.format();\n}\n\nmodule.exports = function getJson (_url, query, _options = {}) {\n  const urlStr = createUrlString(_url, query);\n\n  const options = {\n    ..._options,\n    headers: { ..._options.headers, ... HEADERS },\n  };\n\n  return fetch(urlStr, options)\n    .then(resp => {\n      if (resp.ok) return resp.json();\n\n      return resp.text().then(function (text) {\n        throw new Error(`${resp.status} ${resp.statusText} – ${text}`);\n      });\n    });\n};\n\n\n"]},"metadata":{},"sourceType":"script"}